# FastSurferCNN Processing & Visualization with InVesalius  

This repository provides a streamlined workflow for **running FastSurferCNN** for brain MRI segmentation and **visualizing the results in InVesalius**.

---

## ğŸ“Œ **Overview**  

- **FastSurferCNN**: A deep-learning-based tool for fast whole-brain segmentation of MRI scans.  
- **InVesalius**: A free, open-source software for 3D reconstruction of medical imaging data (DICOM/NIfTI).  

This guide walks through:  
ğŸ‘‰ Running **FastSurferCNN** on an MRI scan  
ğŸ‘‰ Converting the output into a **visualizable format**  
ğŸ‘‰ Loading and analyzing the results in **InVesalius**  

---

## ğŸš€ **Installation**  

### **1ï¸âƒ£ Clone this repository**  
```sh
git clone https://github.com/your-username/your-repo.git
cd your-repo
```

### **2ï¸âƒ£ Install FastSurferCNN**  
```sh
git clone https://github.com/Deep-MI/FastSurfer.git
cd FastSurfer
pip install -r requirements.txt  # Install dependencies
```

### **3ï¸âƒ£ Install InVesalius**  
Download and install InVesalius from:  
ğŸ‘‰ [https://invesalius.github.io/download/](https://invesalius.github.io/download/)  

---

## ğŸƒ **Running FastSurferCNN on MRI Data**  

Make sure your input MRI scan is in **NIfTI format (.nii or .nii.gz)**.  

```sh
python FastSurferCNN.py --i input.nii.gz --o output_dir
```

### **Output Files (in `output_dir/`):**  
- `aseg.auto.mgz` â†’ Segmentation mask  
- `mri_orig.mgz` â†’ Processed input image  

ğŸ’¡ **Convert `.mgz` to `.nii.gz` for InVesalius compatibility:**  
```sh
mri_convert output_dir/aseg.auto.mgz output_dir/aseg.nii.gz
```

---

## ğŸ”¦ **Visualizing in InVesalius**  

1ï¸âƒ£ Open **InVesalius**  
2ï¸âƒ£ Click **"File" â†’ "Import Medical Images"**  
3ï¸âƒ£ Select **`aseg.nii.gz`**  
4ï¸âƒ£ Adjust **opacity & color settings** for better visualization  

ğŸŸ¢ **Optional:** Overlay segmentation on original MRI  
- Load `mri_orig.nii.gz`  
- Set segmentation mask transparency  

---

## ğŸ›  **Troubleshooting**  

ğŸ›  **FastSurferCNN not detecting GPU?**  
Try running on CPU:  
```sh
python FastSurferCNN.py --i input.nii.gz --o output_dir --no_cuda
```

ğŸ›  **InVesalius not displaying segmentation?**  
- Ensure you converted `.mgz` to `.nii.gz`  
- Adjust **contrast & opacity** settings  

---

## ğŸ“œ **References**  

- [FastSurfer GitHub](https://github.com/Deep-MI/FastSurfer)  
- [InVesalius Official Website](https://invesalius.github.io/)  

---

## âœ¨ **Contributions & Issues**  

Feel free to **fork**, **submit PRs**, or report issues. ğŸš€  

